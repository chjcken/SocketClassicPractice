<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
</head>
<body>

	<script type="text/javascript">
		// What : Mẫu thiết kế singleton đảm bảo chỉ duy nhất môt thực thể của một class được tạo ra và nó sẽ cung cấp cho bạn một phương thức để truy cập đến thực thế đó.Kiểm soát việc tạo ra các thực thể nhưng có thể lấy ra thực thế.
		// When : Khi bạn tạo ra một class mà bạn chỉ muốn chỉ có duy nhất một thực thể là thể hiện của class đó và bạn có thể truy cập đến nó ở bất kỳ nơi đâu khi bạn muốn.
		//Ví dụ như: Khi bạn tạo ra một class làm việc với file, config ,class lưu collection dùng chung, hoặc database. Bản chỉ cần duy nhất một thực thể của class đó và bạn sẽ sử dụng nó ở bất kỳ nơi đâu.

		// How
		var mySingleton = (function () {
 
	  // Instance stores a reference to the Singleton
	  var instance;
	 
	  function init() {
	 
	    // Singleton
	 
	    // Private methods and variables
	    function privateMethod(){
	        console.log( "I am private" );
	    }
	 
	    var privateVariable = "Im also private";
	 
	    var privateRandomNumber = Math.random();
	 
	    return {
	 
	      // Public methods and variables
	      publicMethod: function () {
	        console.log( "The public can see me!" );
	      },
	 
	      publicProperty: "I am also public",
	 
	      getRandomNumber: function() {
	        return privateRandomNumber;
	      }
	 
	    };
	 
	  };
	 
	  return {
	 
	    // Get the Singleton instance if one exists
	    // or create one if it doesn't
	    getInstance: function () {
	 
	      if ( !instance ) {
	        instance = init();
	      }
	 
	      return instance;
	    }
	 
	  };
	 
	})();
 
	var myBadSingleton = (function () {
	 
	  // Instance stores a reference to the Singleton
	  var instance;
	 
	  function init() {
	 
	    // Singleton
	 
	    var privateRandomNumber = Math.random();
	 
	    return {
	 
	      getRandomNumber: function() {
	        return privateRandomNumber;
	      }
	 
	    };
	 
	  };
	 
	  return {
	 
	    // Always create a new Singleton instance
	    getInstance: function () {
	 
	      
	      if ( !instance ) {
	        instance = init();
	      }
	 
	      return instance;
	    }
	 
	  };
	 
	})();
	 
	 
	// Usage:
	
	

	var singleA = mySingleton.getInstance();

	var singleB = mySingleton.getInstance();
	console.log( singleA.getRandomNumber() === singleB.getRandomNumber() ); // true
	 
	var badSingleA = myBadSingleton.getInstance();
	var badSingleB = myBadSingleton.getInstance();
	console.log( badSingleA.getRandomNumber() === badSingleB.getRandomNumber() ); // true
	 
	// Note: as we are working with random numbers, there is a
	// mathematical possibility both numbers will be the same,
	// however unlikely. The above example should otherwise still
	// be valid.
	</script>
</body>
</html>